<!-- this is the document to run to do it amazong!-->
<!doctype html>
<html>
<head>
<!-- the tab name at the top in chrome!-->
  <title>WebGL Moon Demo </title>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
  <meta name="description" content="Photorealistic 3D Moon Demo in WebGL using satellite imagery." />
  <!-- for the icon -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Allow fullscreen app install in Android and IOS respectively -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <!-- Import external stylesheets -->
  <link type="text/css" href="css/main.css" rel="stylesheet" />

</head>
<body>
<!---->
  <!-- Three.JS Container DOM Element -->
  <div id="container"></div>
<!-- omg here is the part I can edit the text finally!-->
  <!-- Overlay HUD -->
  <div id="hud">
    <!--To do
    - Create the settings on off buttons
    - change the link of my name to my git
    - make it pretty
    -make a similar one for info in the top left
    -make expanding features
    - pop ups and zoom in or out
    -->
    <div class="hud-panel top-right">
      <!-- settings icon-->

      <div class="dropdown">
          <button class="dropbtn">
            <i class="fa fa-gear"style="color:white">
            </i>
          </button>
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-content">
            <a >Lables (oon/off)</a>
            <a >Automatic Rotation <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            </a>
            <a >Light Rotation (on/off)</a>
            <a href="https://github.com/CarlotaVagon/MoonDemo"><u>WebGL Moon Demo</u></a>
            <a href="http://coryg89.github.io/" ><u>Creator: Cory Gross</u></a>
            <!--might create my own website and add a link here?-->
            <a >2nd Developer: Carlota Vazquez</a>

          </div>
      </div>

    </div>
    <!-- the "buttons" at the bottom must change this layout!-->
    <!--To Do:
    - change this and basically delete it
    -find that thing in the left bottom corner and figure it out-->
    <div class="hud-panel top-left">
    <div class="dropdown">
      <button class="dropbtn">Information
        <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content">
        <a >Apollo 11</a>
        <a >Apollo 12</a>
        <a >Apollo 13</a>
        <a >Apollo 14</a>
        <a >Apollo 15</a>
        <a >Apollo 16</a>
        <a >Apollo 17</a>
      </div>
    </div>
    </div>
    <div class="hud-panel bottom-right">
      <em>h</em> to toggle HUD
      <br /><em>p</em> for screenshot
      <br /><em>f</em> for fullscreen
    </div>
    <div class="hud-panel center"></div>
  </div>

  <div id="loading-container">
    <h2>Loading Assets</h2>
    <p id="loading-message"></p>
  </div>

  <!-- GLSL vertex shader for the moon -->
  <script id="norm-vert-shader" type="x-shader/x-vertex">
    attribute vec4 tangent;

    uniform vec2 uvScale;
    uniform vec3 lightPosition;

    varying vec2 vUv;
    varying mat3 tbn;
    varying vec3 vLightVector;

    void main() {
        vUv = uvScale * uv;

        /** Create tangent-binormal-normal matrix used to transform
            coordinates from object space to tangent space */
        vec3 vNormal = normalize(normalMatrix * normal);
        vec3 vTangent = normalize( normalMatrix * tangent.xyz );
        vec3 vBinormal = normalize(cross( vNormal, vTangent ) * tangent.w);
        tbn = mat3(vTangent, vBinormal, vNormal);

        /** Calculate the vertex-to-light vector */
        vec4 lightVector = viewMatrix * vec4(lightPosition, 1.0);
        vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);
        vLightVector = normalize(lightVector.xyz - modelViewPosition.xyz);

        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  </script>

  <!-- GLSL fragment shader for the moon -->
  <script id="norm-frag-shader" type="x-shader/x-fragment">
    uniform sampler2D textureMap;
    uniform sampler2D normalMap;

    varying vec2 vUv;
    varying mat3 tbn;
    varying vec3 vLightVector;

    void main() {
        /** Transform texture coordinate of normal map to a range (-1, 1) */
        vec3 normalCoordinate = texture2D(normalMap, vUv).xyz * 2.0 - 1.0;

        /** Transform the normal vector in the RGB channels to tangent space */
        vec3 normal = normalize(tbn * normalCoordinate.rgb);

        /** Lighting intensity is calculated as dot of normal vector and
            the vertex-to-light vector */
        float intensity = max(0.07, dot(normal, vLightVector));
        vec4 lighting = vec4(intensity, intensity, intensity, 1.0);

        /** Final color is calculated with the lighting applied */
        gl_FragColor = texture2D(textureMap, vUv) * lighting;
    }
  </script>

  <!-- Include vendor scripts -->
  <script type="text/javascript" src="vendor/three.min.js"></script>
  <script type="text/javascript" src="vendor/TrackballControls.js"></script>
  <script type="text/javascript" src="vendor/detector.min.js"></script>
  <script type="text/javascript" src="vendor/stats.min.js"></script>
  <script type="text/javascript" src="vendor/screenfull.min.js"></script>

  <!-- Include Three.JS scene controller script -->
  <script type="text/javascript" src="js/index.js"></script>

  <noscript>
    <p>You need javascript enabled in order to use this web application.</p>
  </noscript>
</body>
</html>
