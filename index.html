<!-- this is the document to run to do it amazong!-->
<!doctype html>
<html>
<head>
<!-- the tab name at the top in chrome!-->
  <title>WebGL Moon Demo </title>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
  <meta name="description" content="Photorealistic 3D Moon Demo in WebGL using satellite imagery." />
  <!-- for the icon -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Allow fullscreen app install in Android and IOS respectively -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <!-- Import external stylesheets -->
  <link type="text/css" href="css/main.css" rel="stylesheet" />

</head>
<body>
<!---->
  <!-- Three.JS Container DOM Element -->
  <div id="container"></div>
<!-- omg here is the part I can edit the text finally!-->
  <!-- Overlay HUD -->
  <div id="hud">
    <!--To do
    - Create the settings on off buttons
    - change the link of my name to my git
    - make it pretty
    -make a similar one for info in the top left
    -make expanding features
    - pop ups and zoom in or out
    -->
    <div class="hud-panel top-right">
      <!-- settings icon-->

      <div class="dropdown">
          <button class="dropbtn">
            <i class="fa fa-gear"style="color:white">
            </i>
          </button>
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-content">
            <a >Lables <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            </a>
            <a >Automatic Rotation <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            </a>
            <a >Light Rotation <label class="switch">
              <input type="checkbox" id="myCheckbox" onchange="shaderSwitch()" checked>
              <span class="slider round"></span>
            </label>
            </a>
            <a href="https://github.com/CarlotaVagon/MoonDemo" target="_blank"><u>WebGL Moon Demo</u></a>
            <a href="http://coryg89.github.io/" target="_blank" ><u>Creator: Cory Gross</u></a>
            <!--might create my own website and add a link here?-->
            <a >2nd Developer: Carlota Vazquez</a>

          </div>
      </div>

    </div>
    <!-- the "buttons" at the bottom must change this layout!-->
    <!--To Do:
    - change this and basically delete it
    -find that thing in the left bottom corner and figure it out-->

    <div class="hud-panel top-left">
      <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <button type="button" class="collapsible">Apollo 11</button>
        <div class="content">
          <p style="color:white">Apollo 11 was the first manned mission to land on the Moon. The first steps by humans on another planetary body were taken by Neil Armstrong and Buzz Aldrin on July 20, 1969. The astronauts also returned to Earth the first samples from another planetary body.</p>
          <a style="color:white;font-size:15px;text-decoration: underline" href="https://airandspace.si.edu/explore-and-learn/topics/apollo/apollo-program/landing-missions/apollo11.cfm" target="_blank">more</a>
        </div>
        <button type="button" class="collapsible">Apollo 12</button>
        <div class="content">
          <p style="color:white">The Apollo 12 mission was the second manned lunar landing mission. Its objective was to perform detailed scientific lunar exploration. The lunar module pilot, was launched from Kennedy Space Center, Fla., at 11:22:00 EST on November 14, 1969.</p>
          <a style="color:white;font-size:15px;text-decoration: underline" href="https://airandspace.si.edu/explore-and-learn/topics/apollo/apollo-program/landing-missions/apollo12.cfm" target="_blank">more</a>
        </div>
        <button type="button" class="collapsible">Apollo 13</button>
        <div class="content">
          <p style="color:white">This is where the infamous “Houston, we've had a problem” came from. An explosion in one of the oxygen tanks crippled the spacecraft during flight and the crew were forced to orbit the Moon and return to the Earth without landing. April 11, 1970.</p>
          <a style="color:white;font-size:15px;text-decoration: underline" href="https://airandspace.si.edu/explore-and-learn/topics/apollo/apollo-program/landing-missions/apollo13.cfm" target="_blank">more</a>
        </div>
        <button type="button" class="collapsible">Apollo 14</button>
        <div class="content">
          <p style="color:white">Apollo 14 landed in the Fra Mauro region, the intended landing site of the aborted Apollo 13 mission. They collected samples, took photographs, and the nearby Cone crater. One of the more famous moments was when Apollo 14 commander Alan Shepard hit 2 golf balls on the Moon. January 31, 1971.</p>
          <a style="color:white;font-size:15px;text-decoration: underline" href="https://airandspace.si.edu/explore-and-learn/topics/apollo/apollo-program/landing-missions/apollo14.cfm" target="_blank">more</a>
        </div>
        <button type="button" class="collapsible">Apollo 15</button>
        <div class="content">
          <p style="color:white">Apollo 15 was the fourth mission to land men on the Moon. This mission was the first flight of the Lunar Roving Vehicle which astronauts used to explore the geology of the Hadley Rille/Apennine region. July 26, 1971. </p>
          <a style="color:white;font-size:15px;text-decoration: underline" href="https://airandspace.si.edu/explore-and-learn/topics/apollo/apollo-program/landing-missions/apollo15.cfm" target="_blank">more</a>
        </div>
        <button type="button" class="collapsible">Apollo 16</button>
        <div class="content">
          <p style="color:white"> Apollo 16 was the fifth successful mision. It was also the second flight of the Lunar Roving Vehicle. Astronauts collected samples, took photographs and conducted experiments that included the first use of an ultraviolet camera/spectrograph on the Moon. April 16, 1972. </p>
          <a style="color:white;font-size:15px;text-decoration: underline" href="https://airandspace.si.edu/explore-and-learn/topics/apollo/apollo-program/landing-missions/apollo16.cfm" target="_blank">more</a>
        </div>
        <button type="button" class="collapsible">Apollo 17</button>
        <div class="content">
          <p style="color:white">Apollo 17 was the last Apollo mission to land men on the Moon. Eugene Cernan, commander of Apollo 17, still holds the distinction of being the last man to walk on the Moon, as no humans have visited the Moon since December 14, 1972. </p>
          <a style="color:white;font-size:15px;text-decoration: underline" href="https://airandspace.si.edu/explore-and-learn/topics/apollo/apollo-program/landing-missions/apollo17.cfm" target="_blank">more</a>
        </div>

        <script>
          var coll = document.getElementsByClassName("collapsible");
          var i;

          for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
              this.classList.toggle("active");
              var content = this.nextElementSibling;
              if (content.style.display === "block") {
                content.style.display = "none";
              } else {
                content.style.display = "block";
              }
            });
          }
        </script>

      </div>


      <span style="font-size:15px;cursor:pointer;color:white" onclick="openNav()">&#9432; information</span>

      <script>
        function openNav() {
          document.getElementById("mySidenav").style.width = "250px";
        }

        function closeNav() {
          document.getElementById("mySidenav").style.width = "0";
        }
      </script>

    </div>
    <div class="hud-panel bottom-right">
      <em>h</em> to toggle HUD
      <br /><em>p</em> for screenshot
      <br /><em>f</em> for fullscreen
    </div>
    <div class="hud-panel center"></div>
  </div>

  <div id="loading-container">
    <h2>Loading Assets</h2>
    <p id="loading-message"></p>
  </div>


  <!-- GLSL vertex shader for the moon -->
  <script id="norm-vert-shader" type="x-shader/x-vertex">
    attribute vec4 tangent;

    uniform vec2 uvScale;
    uniform vec3 lightPosition;

    varying vec2 vUv;
    varying mat3 tbn;
    varying vec3 vLightVector;

    void main() {
        vUv = uvScale * uv;

        /** Create tangent-binormal-normal matrix used to transform
            coordinates from object space to tangent space */
        vec3 vNormal = normalize(normalMatrix * normal);
        vec3 vTangent = normalize( normalMatrix * tangent.xyz );
        vec3 vBinormal = normalize(cross( vNormal, vTangent ) * tangent.w);
        tbn = mat3(vTangent, vBinormal, vNormal);

        /** Calculate the vertex-to-light vector */
        vec4 lightVector = viewMatrix * vec4(lightPosition, 1.0);
        vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);
        vLightVector = normalize(lightVector.xyz - modelViewPosition.xyz);

        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  </script>

  <!-- GLSL fragment shader for the moon -->
  <script id="norm-frag-shader" type="x-shader/x-fragment">
    uniform sampler2D textureMap;
    uniform sampler2D normalMap;

    varying vec2 vUv;
    varying mat3 tbn;
    varying vec3 vLightVector;

    void main() {
        /** Transform texture coordinate of normal map to a range (-1, 1) */
        vec3 normalCoordinate = texture2D(normalMap, vUv).xyz * 2.0 - 1.0;

        /** Transform the normal vector in the RGB channels to tangent space */
        vec3 normal = normalize(tbn * normalCoordinate.rgb);

        /** Lighting intensity is calculated as dot of normal vector and
            the vertex-to-light vector */
        float intensity = max(0.07, dot(normal, vLightVector));
        vec4 lighting = vec4(intensity, intensity, intensity, 1.0);

        /** Final color is calculated with the lighting applied */
        gl_FragColor = texture2D(textureMap, vUv) * lighting;
    }
  </script>

  <!-- Include vendor scripts -->
  <script type="text/javascript" src="vendor/three.min.js"></script>
  <script type="text/javascript" src="vendor/TrackballControls.js"></script>
  <script type="text/javascript" src="vendor/detector.min.js"></script>
  <script type="text/javascript" src="vendor/stats.min.js"></script>
  <script type="text/javascript" src="vendor/screenfull.min.js"></script>

  <!-- Include Three.JS scene controller script -->
  <script type="text/javascript" src="js/index.js"></script>

  <noscript>
    <p>You need javascript enabled in order to use this web application.</p>
  </noscript>
</body>
</html>
